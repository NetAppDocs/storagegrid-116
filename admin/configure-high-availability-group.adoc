---
permalink: admin/configure-high-availability-group.html
sidebar: sidebar
keywords: how to configure high availability group, control node failover order
summary: 'You can configure high availability \(HA\) groups to provide highly available access to the services on Admin Nodes or Gateway Nodes.'
---
= Configure high availability groups
:icons: font
:imagesdir: ../media/

[.lead]
You can configure high availability (HA) groups to provide highly available access to the services on Admin Nodes or Gateway Nodes.

.What you'll need

* You are signed in to the Grid Manager using a xref:../admin/web-browser-requirements.adoc[supported web browser].
* You have the Root Access permission.
* If you want to use a VLAN interface in an HA group, you have already created the VLAN interface. See xref:../admin/configure-vlan-interfaces.adoc[Configure VLAN interfaces].

== Create a high availability group

When you create a high availability group, you select one or more interfaces and organize them in failover order. Then, you assign one or more VIP addresses to the group.

An interface must be for a Gateway Node or an Admin Node to be included in an HA group. An HA group can only use one interface for any given node; however, other interfaces for the same node can be used in different HA groups.

=== Access the wizard

. Select *CONFIGURATION* > *Network* > *High availability groups*.

. Select *Create*.


=== Enter details for the HA group

. Provide a unique name for the HA group.
+

image::../media/ha-group-create-wizard.png[HA Groups create wizard]

. Optionally, enter a description for the HA group.

. Select *Continue*.

=== Add interfaces to the HA group

. Select one or more interfaces to add to this HA group. Use the column headers to sort the rows, or enter a search term to locate interfaces more quickly.
+
image::../media/ha_group_add_interfaces.png[HA Groups Add Interfaces]
+
.Guidelines for selecting interfaces

* You must select at least one interface.
* You can select only one interface for a node.
+
IP addresses will be restricted to the smallest subnet (the one with the largest prefix).

* If the HA group is for HA protection of Admin Node services, which include the the Grid Manager and the Tenant Manager, select interfaces on Admin Nodes only.

* If the HA group is for HA protection of S3 or Swift client traffic, select interfaces on either Admin Nodes or Gateway Nodes.

* If the HA group is for HA protection of the deprecated CLB service, select interfaces on Gateway Nodes only.

* If you select interfaces on different types of nodes, an informational note appears. Only the services common to the selected nodes will be available on the virtual IPs.
+
image::../media/ha_groups_different_node_types.png[HA Groups Different Node Types]

. Select *Continue*.

=== Determine the failover order

. Determine the Primary interface and any Backup (failover) interfaces for this HA group.

+
Drag and drop rows to change the values in the *Failover order* column.
+
IMPORTANT: If the HA group provides access to the Grid Manager, you must select an interface on the primary Admin Node to be the Primary interface. Some maintenance procedures can only be performed from the primary Admin Node.
+
The first interface in the list is the Primary interface. The Primary interface is the active interface unless a failure occurs.
+
If the HA group includes more than one interface and the Primary interface fails, the VIP addresses move to the first Backup interface in the failover order. If that interface fails, the VIP addresses move to the next Backup interface, and so on.

. Select *Continue*.

=== Enter IP addresses

. If the virtual IP addresses for this HA group are on a different subnet than the ones used by S3 and Swift clients or by Grid Manager and Tenant Manager users, specify the gateway for the VIP subnet.
+
image::../media/ha_group_select_virtual_ips.png[HA Groups enter VIPs]
+
Enter the gateway using CIDR notation: an IPv4 address followed by a slash and the subnet length (0-32). For example, `192.16.2.1/22`.
+
Client and admin users will use this gateway to access the virtual IP addresses.
+
NOTE: Do not specify the the broadcast or network address of the VIP subnet.

. Enter one or more virtual IP addresses for the HA group. You can add up to 10 IP addresses.
+
You must provide at least one IPv4 address. Optionally, you can specify additional IPv4 and IPv6 addresses.
+
NOTE: If you specified a value for *Gateway CIDR*, all VIPs must be in the same subnet as the gateway.

. Select *Create HA group*.
+
The HA Group is created, and you can now use the configured virtual IP addresses.

=== Next steps

Configure one or more load balancer endpoints: xref:managing-load-balancing.adoc[Managing load balancing]

== Edit a high availability group

You can edit a high availability (HA) group to change its name and description, add or remove interfaces, change the failover order, add or update a virtual IP address.

For example, you might need to remove an interface from an HA group if you want to remove a node in a site or node decommission procedure.

.Steps

. Select *CONFIGURATION* > *Network* > *High Availability Groups*.
+
The High Availability Groups page appears.
+
image::../media/ha_groups_page_with_two_groups.png[HA Groups Page With Two Groups]

. Do one of the following:
** Select the HA group name. Then, select *Edit*.
** Select the radio button for the HA group you want to edit. Then, select *Actions* > *Edit*.

. Optionally, update the group's name or description.
. Optionally, select or unselect the check boxes to add or remove interfaces.
. Optionally, drag and drop rows to change the failover order of the Primary interface and any Backup interfaces for this HA group.
+
NOTE: If the HA group provides access to the Grid Manager, you must select an interface on the primary Admin Node to be the Primary interface. Some maintenance procedures can only be performed from the primary Admin Node.

. Optionally, update the virtual IP addresses for the HA group.

. Select *Save*.

==  Remove a high availability group

You can remove one or more high availability (HA) groups.

To prevent client disruptions, update any affected S3 or Swift client applications before you remove an HA group. Update each client to connect using another IP address, for example, the virtual IP address of a different HA group or the IP address that was configured for an interface during installation.

.Steps

. Select *CONFIGURATION* > *Network* > *High Availability Groups*.

. Do one of the following:
** Select the HA group name. Then, select *Remove* on the details page.
** Select the check box for each HA group you want to remove. Then, select *Actions* > *Remove HA group*.

. Select *OK* to confirm your selection. All HA groups you selected are removed. A green success banner appears on the High availability groups page.
