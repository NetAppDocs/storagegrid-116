---
permalink: admin/configuring_load_balancer_endpoints.html
sidebar: sidebar
keywords: load balancer endpoint, endpoint, S3 client connection, Swift client connection
summary: 'Load balancer endpoints determine the ports and network protocols S3 and Swift clients can use when connecting to the StorageGRID load balancer on Gateway and Admin Nodes. '
---
= Configure load balancer endpoints
:icons: font
:imagesdir: ../media/

[.lead]
Load balancer endpoints determine the ports and network protocols S3 and Swift clients can use when connecting to the StorageGRID load balancer on Gateway and Admin Nodes.

.What you'll need

* You are signed in to the Grid Manager using a supported browser.
* You have the Root Access permission.
* If you previously remapped a port you intend to use for the load balancer endpoint, you have xref:..maintain/removing_port_remaps.adoc[removed the port remap].
+
IMPORTANT: If you have remapped any ports, you cannot use the same ports to configure load balancer endpoints. You can create endpoints using remapped ports, but those endpoints will be remapped to ports used by the deprecated CLB service, not the Load Balancer service.

*  You have created any high availability (HA) groups you plan to use. See xref:managing_high_availability_groups.adoc[managing high availability groups].

* If you are creating an HTTPS endpoint (recommended), you have the information required to upload or generate the server certificate.
+
You can use wildcards to represent the fully qualified domain names of all Admin Nodes and Gateway Nodes running the Load Balancer service. For example, `*.sgws._example_.com` uses the * wildcard to represent `adm1.sgws._example_.com` and `gn1.sgws._example_.com`.
+
xref:configuring_s3_api_endpoint_domain_names.adoc[Configuring S3 API endpoint domain names]


== Create a load balancer endpoint (option 1)

Each load balancer endpoint specifies a port, a client type (S3 or Swift), and a network protocol (HTTP or HTTPS).




.Steps

. Select *CONFIGURATION* > *Network* > *Load balancer endpoints*.

. Select *Create*.
+
image::../media/load_balancer_endpoint_create_http.png[Create LB Endpoint]

. Enter details about the endpoint:
+
[cols="1a,2a" options="header"]
|===
| Field| Description

|Name
|A descriptive name for the endpoint, which will appear in the table on the Load balancer endpoints page.

|Port
|The port clients will use to connect to the Load Balancer service on Admin Nodes and Gateway Nodes.

Accept the suggested port number or enter any external port that is not used by another grid service.

If you enter *80* or *443*, the endpoint is configured only on Gateway Nodes. These ports are reserved on Admin Nodes.

xref:../network/index.adoc[Network guidelines]

|Client type
|The type of client application that will use this endpoint, either *S3* or *Swift*.

|Network protocol
|The network protocol that clients will use when connecting to this endpoint.

*  Select *HTTPS* for secure, TLS encrypted communication. You must attach a security certificate before you can save the endpoint.

* Select *HTTP* for less secure, unencrypted communication. Use HTTP only for a non-production grid.
|===

. Select the binding mode for the endpoint.
+
The binding mode controls how the endpoint is accessed--using any IP address or using specific IP addresses and network interfaces.
+
[cols="1a,2a" options="header"]
|===
| Option | Description

|Global (default)
|Clients can access the endpoint using the IP address of any Gateway Node or Admin Node, or the virtual IP address of any HA group on any network.

Use the *Global* setting (default) unless you need to restrict the accessibility of this endpoint.

|Virtual IPs of HA groups
|Clients can only access the endpoint using a virtual IP address of an HA group.

Endpoints using this mode can all use the same port number, as long as the HA groups you select for the endpoints do not overlap.

|Node interfaces
|Clients can only access the endpoint using the IP address of a selected node and network interface.

Endpoints using this mode can all use the same port number as long as the interfaces you select for the endpoints do not overlap.

|===
+
[NOTE]
If you use the same port for more than one endpoint, an endpoint using *Virtual IPs of HA groups* mode overrides an endpoint using *Node interfaces* mode, which overrides an endpoint using *Global* mode.


** If you selected *Virtual IPs of HA groups*, select the HA groups.
+
image::../media/load_balancer_endpoint_ha_group_vips_binding_mode.png[Endpoint HA Group VIPs Binding Mode]
+
** If you selected *Node interfaces*, select one or more node interfaces for each Admin Node or Gateway Node that you want to associate with this endpoint.
+
image::../media/load_balancer_endpoint_node_interfaces_binding_mode.png[Endpoint Node Interfaces Binding Mode]

. If you are creating an *HTTPS* endpoint, select the type of security certificate you want to attach to the endpoint. Otherwise, go to the next step.
+
[cols="1a,2a" options="header"]
|===
| Option| Description

|Use StorageGRID S3 and Swift certificate
|

|Upload certificate
|

|Generate certificate
|

|===


** If you selected *Upload Certificate*, browse for the server certificate, the certificate private key, and the CA bundle (optional).
+
image::../media/load_balancer_endpoint_upload_cert.png[Upload Cert]

** If you selected *Generate Certificate*, enter information for the certificate.
+
image::../media/load_balancer_endpoint_generate_cert.png[Generate Cert]

+
[cols="1a,2a" options="header"]
|===
| Field| Description

|Domain or IP address
|One or more domain names or IP addresses. Specify all names or addresses S3 and Swift clients will use to access the endpoint.



If you are using high availability (HA) groups, add the domain names and IP addresses of the HA virtual IPs.

Select image:../media/icon_plus_sign_black_on_white.gif[Plus Sign] to add any other domain names or IP addresses.

|Subject
|Optionally, enter an X.509 subject, also referred to as the Distinguished Name (DN), to identify who owns the certificate.

|Days valid
|Optionally, select the number of days the certificate is valid. The default is 730 days.


|===

. Select *Create*.
+
The endpoint is created. The table on the Load balancer endpoints page lists the endpoint's name, port, and network protocol.


.After you finish
Provide S3 and Swift clients with the information needed to connect to the endpoint:

* Port number
* IP address, which might be the VIP of an HA group or the IP address of a Gateway or Admin Node
* Any required certificate details


== Create a load balancer endpoint (option 2)

Each load balancer endpoint specifies a port, a client type (S3 or Swift), and a network protocol (HTTP or HTTPS).


=== Access the wizard

. Select *CONFIGURATION* > *Network* > *Load balancer endpoints*.

. Select *Create*.
+
image::../media/load_balancer_endpoint_create_http.png[Create LB Endpoint]

=== Enter endpoint details

. Enter details for the endpoint.
+
[cols="1a,2a" options="header"]
|===
| Field| Description

|Name
|A descriptive name for the endpoint, which will appear in the table on the Load balancer endpoints page.

|Port
|The port clients will use to connect to the Load Balancer service on Admin Nodes and Gateway Nodes.

Accept the suggested port number or enter any external port that is not used by another grid service.

If you enter *80* or *443*, the endpoint is configured only on Gateway Nodes. These ports are reserved on Admin Nodes.

xref:../network/index.adoc[Network guidelines]

|Client type
|The type of client application that will use this endpoint, either *S3* or *Swift*.

|Network protocol
|The network protocol that clients will use when connecting to this endpoint.

*  Select *HTTPS* for secure, TLS encrypted communication. You must attach a security certificate before you can save the endpoint.

* Select *HTTP* for less secure, unencrypted communication. Use HTTP only for a non-production grid.
|===

. Select *Continue*.

=== Select the binding mode

. Select a binding mode for the endpoint to control how the endpoint is accessed--using any IP address or using specific IP addresses and network interfaces.
+
[cols="1a,2a" options="header"]
|===
| Option | Description

|Global (default)
|Clients can access the endpoint using the IP address of any Gateway Node or Admin Node, or the virtual IP address of any HA group on any network.

Use the *Global* setting (default) unless you need to restrict the accessibility of this endpoint.

|Virtual IPs of HA groups
|Clients can only access the endpoint using a virtual IP address of an HA group.

Endpoints using this mode can all use the same port number, as long as the HA groups you select for the endpoints do not overlap.

|Node interfaces
|Clients can only access the endpoint using the IP address of a selected node and network interface.

Endpoints using this mode can all use the same port number as long as the interfaces you select for the endpoints do not overlap.

|===
+
[NOTE]
If you use the same port for more than one endpoint, an endpoint using *Virtual IPs of HA groups* mode overrides an endpoint using *Node interfaces* mode, which overrides an endpoint using *Global* mode.

. If you selected *Virtual IPs of HA groups*, select the HA groups.
+
image::../media/load_balancer_endpoint_ha_group_vips_binding_mode.png[Endpoint HA Group VIPs Binding Mode]
+
. If you selected *Node interfaces*, select one or more node interfaces for each Admin Node or Gateway Node that you want to associate with this endpoint.
+
image::../media/load_balancer_endpoint_node_interfaces_binding_mode.png[Endpoint Node Interfaces Binding Mode]

. If you are creating an *HTTP* endpoint, select *Create* and go to <<After-you-finish,After you finish>>. Otherwise, select *Continue*.


=== Attach certificate

. If you are creating an *HTTPS* endpoint, select the type of security certificate you want to attach to the endpoint.
+
[cols="1a,2a" options="header"]
|===
| Option| Description

|Use StorageGRID S3 and Swift certificate
|

|Upload certificate
|

|Generate certificate
|

|===
+
. If you selected *Upload Certificate*, browse for the server certificate, the certificate private key, and the CA bundle (optional).
+
image::../media/load_balancer_endpoint_upload_cert.png[Upload Cert]

. If you selected *Generate Certificate*, enter information for the certificate.
+
image::../media/load_balancer_endpoint_generate_cert.png[Generate Cert]

+
[cols="1a,2a" options="header"]
|===
| Field| Description

|Domain or IP address
|One or more domain names or IP addresses. Specify all names or addresses S3 and Swift clients will use to access the endpoint.

If you are using high availability (HA) groups, add the domain names and IP addresses of the HA virtual IPs.

Select image:../media/icon_plus_sign_black_on_white.gif[Plus Sign] to add any other domain names or IP addresses.

|Subject
|Optionally, enter an X.509 subject, also referred to as the Distinguished Name (DN), to identify who owns the certificate.

|Days valid
|Optionally, select the number of days the certificate is valid. The default is 730 days.

|===

. Select *Create*.


=== [[After-you-finish]]After you finish
Provide S3 and Swift clients with the information needed to connect to the endpoint:

* Port number
* IP address, which might be the VIP of an HA group or the IP address of a Gateway or Admin Node
* Any required certificate details




== Edit load balancer endpoints


For an unsecured (HTTP) endpoint, you can change the endpoint service type between S3 and Swift. For a secured (HTTPS) endpoint, you can edit the endpoint service type and view or change the security certificate.

.Steps

. Select *CONFIGURATION > Network > Load balancer endpoints*.
. Select the radio button for the endpoint you want to edit.
. Click *Actions > Edit*.
. Make the desired changes to the endpoint.
+
For an unsecured (HTTP) endpoint, you can:
+
 * Change the endpoint service type between S3 and Swift.
 * Change the endpoint binding mode.

+
For a secured (HTTPS) endpoint, you can:

 * Change the endpoint service type between S3 and Swift.
 * Change the endpoint binding mode.
 * View the security certificate.
 * Upload or generate a new security certificate when the current certificate is expired or about to expire.
* Display information about the default StorageGRID server certificate or a CA signed certificate that was uploaded.

+
NOTE: To change the protocol for an existing endpoint, for example from HTTP to HTTPS, you must create a new endpoint. Follow the instructions for creating load balancer endpoints, and select the desired protocol.

. Select *Save*.


== Remove load balancer endpoints

You can remove a load balancer endpoint that you no longer need.

.Steps

. Select *CONFIGURATION* > *Network* > *Load balancer endpoints*.
. Select the radio button for the endpoint you want to remove.
. Select *Actions* > *Remove*.
. Select *OK*.
