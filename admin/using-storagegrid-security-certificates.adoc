---
permalink: admin/using-storagegrid-security-certificates.html
sidebar: sidebar
keywords:
summary: 'Security certificates are small data files used to create secure, trusted connections between StorageGRID components and between StorageGRID components and external systems.'
---
= Use security certificates
:icons: font
:imagesdir: ../media/

[.lead]
Security certificates are small data files used to create secure, trusted connections between StorageGRID components and between StorageGRID components and external systems.

StorageGRID uses two types of security certificates:

* xref:configuring-server-certificates.adoc[*Server certificates*] are required when you use HTTPS connections. Server certificates are used to establish secure connections between clients and servers, authenticating the identity of a server to its clients and providing a secure communication path for data. The server and the client each have a copy of the certificate.
* xref:configuring-administrator-client-certificates.adoc[*Client certificates*] authenticate a client or user identity to the server, providing more secure authentication than passwords alone. Client certificates do not encrypt data.

When a client connects to the server using HTTPS, the server responds with the server certificate, which contains a public key. The client verifies this certificate by comparing the server signature to the signature on its copy of the certificate. If the signatures match, the client starts a session with the server using the same public key.

StorageGRID functions as the server for some connections (such as the load balancer endpoint) or as the client for other connections (such as the CloudMirror replication service).

[#gridca_details]
*Default Grid CA certificate*

StorageGRID also includes a built-in certificate authority (CA) that generates an internal Grid CA certificate during system installation. The Grid CA certificate is used, by default, to secure internal StorageGRID traffic. An external certificate authority (CA) can issue custom certificates that are fully compliant with your organization's information security policies. Although you can use the Grid CA certificate for a non-production environment, the best practice for a production environment is to use custom certificates signed by an external certificate authority. Unsecured connections with no certificate are also supported but are not recommended.

* Custom CA certificates do not remove the internal certificates; however, the custom certificates should be the ones specified for verifying server connections.
* All custom certificates must meet the xref:../harden/index.adoc[system hardening guidelines] for server certificates.
* StorageGRID supports bundling of certificates from a CA into a single file (known as a CA certificate bundle).

NOTE: StorageGRID also includes operating system CA certificates that are the same on all grids. In production environments, make sure that you specify a custom certificate signed by an external certificate authority in place of the operating system CA certificate.

Variants of the server and client certificate types are implemented in several ways. You should have all the certificates needed for your specific StorageGRID configuration ready before you configure the system.

== Access security certificates

You can access information about all StorageGRID certificates in a single location, along with links to the configuration workflow for each certificate.

. From Grid Manger, select *CONFIGURATON* > *Security* > *Certificates*.
+
// Update image
image::security_certificates.png["Certificates page"]

. Select a tab on the certificate page for information about each certificate category and to access the certificate settings. You can only access a tab if you have the appropriate permission.
+
* *Global*: secures StorageGRID access from web browsers and external API clients.
* *Grid CA*: secures internal StorageGRID traffic.
* *Client*: secures connections between external clients and the StorageGRID Prometheus database.
* *Load balancer endpoints*: secures connections between S3 and Swift clients and the StorageGRID Load Balancer.
* *Tenants*: secures connections to identity federation servers or from platform service endpoints to S3 storage resources.
* *Other*: secures StorageGRID connections requiring specific certificates.

+
Each tab is described below with links to additional certificate details.

[role="tabbed-block"]
====

.Global
--
The global certificates secure StorageGRID access from web browsers and external API clients. Two global certificates are initially generated by the StorageGRID certificate authority during installation. The best practice for a production environment is to use custom certificates signed by an external certificate authority.

* <<Management interface certificate>>: secures client web-browser connections from management interfaces.
* <<S3 and Swift API certificate>>: secures client API connections.

Information about the global certificates that are installed includes:

* *Name*: Certificate name with link to managing the certificate.
* *Description*
* *Type*: Custom or default. +
You should always use a custom certificate for improved grid security.
* *Expiration date*: If using the default certificate, no expiration date is shown.

For improved grid security, replace the default certificates with custom certificates signed by an external certificate authority:

* xref:configuring-custom-server-certificate-for-grid-manager-tenant-manager.adoc[Replace the default StorageGRID-generated management interface certificate] used for Grid Manager and Tenant Manager connections.
* xref:configuring-custom-server-certificate-for-storage-node-or-clb.adoc[Replace the S3 and Swift API certificate] used for Storage Node or CLB service (deprecated) connections.

You can restore the default xref:restoring-default-server-certificates-for-grid-manager-tenant-manager.adoc[management interface certificate] and xref:restoring-default-server-certificates-for-s3-swift-api-endpoints.adoc[S3 and Swift API certificate].

You can also xref:generating-self-signed-certificate-for-management-interface.adoc[generate a new self-signed server certificate for the management interface] from within StorageGRID.

--

.Grid CA
--
The <<gridca_details,Grid CA certificate>>, generated by the StorageGRID certificate authority during StorageGRID installation, secures all internal StorageGRID traffic.

Certificate information includes the certificate expiration date and the certificate contents.

You can xref:copying-storagegrid-system-ca-certificate.adoc[copy or download the Grid CA certificate], but cannot change it.

--

.Client
--
<<adminclientcert_details,Client certificates>>, generated by an external certificate authority, secure the connections between external monitoring tools and the StorageGRID Prometheus database.

The certificate table has a row for each configured client certificate and indicates whether the certificate can be used for Prometheus database access, along with the certificate expiration date.

You can:

* xref:configuring-administrator-client-certificates.adoc#add-client-certificates[Upload or generate a new client certificate]
* Select a certificate name to display the certificate details where you can:
** xref:configuring-administrator-client-certificates.adoc#edit-client-certificates[Change the client certificate name]
** xref:configuring-administrator-client-certificates.adoc#edit-client-certificates[Set the Prometheus access permission]
** xref:configuring-administrator-client-certificates.adoc#edit-client-certificates[Upload and replace the client certificate]
** xref:configuring-administrator-client-certificates.adoc#copy-or-download-client-certificates[Copy or download the client certificate]
** xref:configure-client-certificates.adoc#remove-client-certificates[Remove the client certificate]
* Select *Actions* to quickly xref:configuring-administrator-client-certificates.adoc#edit-client-certificates[edit] or xref:configure-client-certificates.adoc#remove-client-certificates[remove] multiple client certificates.

--

.Load balancer endpoints
--
<<Load balancer endpoint certificate,Load balancer endpoint certificates>>, that you upload or generate, secure the connections between S3 and Swift clients and the StorageGRID Load Balancer service on Gateway Nodes and Admin Nodes. You can also xref:configuring-load-balancer-endpoints.adoc[use the global S3 and Swift API certificate] instead of generating a new load balancer endpoint certificate.

The load balancer endpoint table has a row for each configured load balancer endpoint and indicates whether the S3 and Swift API certificate is being used for the endpoint instead of a custom certificate, along with the certificate expiration date.

Selecting an endpoint name opens a browser tab with xref:configuring-load-balancer-endpoints.adoc[information about the load balancer endpoint, including its certificate details].

You can also xref:../fabricpool/creating-load-balancer-endpoint-for-fabricpool.adoc[specify a load balancer endpoint certificate for FabricPool].

--

.Tenants
--
Tenants can use <<Identity federation certificate,identity federation server certificates>> or <<Platform services endpoint certificate,platform service endpoint certificates>> to secure their connections with StorageGRID.


The tenant table has a row for each tenant and indicates if each tenant has permission to use its own identity source or platform services.

Selecting a tenant name opens a browser tab where you can xref:../tenant/signing-in-to-tenant-manager.adoc[log in to the Tenant Manager] and view information about xref:../tenant/using-identity-federation.adoc[identity federation] and xref:../tenant/editing-platform-services-endpoint.adoc[platform services].

You can also xref:../tenant/creating-platform-services-endpoint.adoc[specify a platform service endpoint certificate during endpoint creation].

--

.Other
--
StorageGRID uses other security certificates for specific purposes. These certificates are listed by their functional name. Other security certificates include:

* <<Identity federation certificate,Identity federation certificates>>
* <<Cloud Storage Pool endpoint certificate,Cloud Storage Pool certificates>>
* <<Key management server (KMS) certificate,Key management servers (KMS) certificates>>
* <<Single sign-on (SSO) certificate,Single sign-on certificates>>
* <<Email alert notification certificate,Email alert notification certificates>>

Information indicates the type of certificate a function uses and its client and server certificate expiration dates. Selecting a function name opens a browser tab where you can view and edit the certificate details.

You can:

* xref:using-identity-federation.adoc[View and edit an identity federation certificate]
* xref:kms-adding.adoc[Upload key management server (KMS) server and client certificates]
* Specify a cloud storage pool certificate for xref:../ilm/s3-authentication-details-for-cloud-storage-pool.adoc[S3], xref:../ilm/c2s_s3-authentication-details-for-cloud-storage-pool.adoc[C2S S3], or xref:../ilm/azure-authentication-details-for-cloud-storage-pool.adoc[Azure]
* xref:creating-relying-party-trusts-in-ad-fs.adoc#creating-a-relying-party-trust-manually[Manually specify an SSO certificate for relying party trust]
* xref:../monitor/managing-alerts.adoc#setting-up-email-notifications-for-alerts[Specify an email alert notification certificate]

--

====

== Security certificate details

[#adminclientcert_details]
=== Administrator client certificate
[cols="1a,1a,1a,1a" options="header"]
|===
| Certificate type| Description| Navigation location| Details
a|
Client
a|
Installed on each client, allowing StorageGRID to authenticate external client access.

* Allows authorized external clients to access the StorageGRID Prometheus database.
* Allows secure monitoring of StorageGRID using external tools.

a|
*CONFIGURATION* > *Security* > *Certificates* and then select the *Client* tab
a|
xref:configuring-administrator-client-certificates.adoc[Configure administrator client certificates]
|===

=== Identity federation certificate
[cols="1a,1a,1a,1a" options="header"]
|===
| Certificate type| Description| Navigation location| Details
a|
Server
a|
Authenticates the connection between StorageGRID and an external Active Directory, OpenLDAP, or Oracle Directory Server.Used for identity federation, which allows admin groups and users to be managed by an external system.

a|
*Configuration* > *Access Control* > *Identity Federation*
a|
xref:using-identity-federation.adoc[Use identity federation]
a|
|===

=== Single sign-on (SSO) certificate
[cols="1a,1a,1a,1a" options="header"]
|===
| Certificate type| Description| Navigation location| Details
a|
Server
a|
Authenticates the connection between Active Directory Federation Services (AD FS) and StorageGRID that is used for single sign-on (SSO) requests.
a|
*Configuration* > *Access Control* > *Single Sign-on*
a|
xref:configuring-sso.adoc[Configure single sign-on]
a|
|===

=== Key management server (KMS) certificate
[cols="1a,1a,1a,1a" options="header"]
|===
| Certificate type| Description| Navigation location| Details
a|
Server and client
a|
Authenticates the connection between StorageGRID and an external key management server (KMS), which provides encryption keys to StorageGRID appliance nodes.
a|
*Configuration* > *System Settings* > *Key Management Server*
a|
xref:kms-adding.adoc[Adding key management server (KMS)]
|===

=== Email alert notification certificate
[cols="1a,1a,1a,1a" options="header"]
|===
| Certificate type| Description| Navigation location| Details
a|
Server and client
a|
Authenticates the connection between an SMTP email server and StorageGRID that is used for alert notifications.

* If communications with the SMTP server requires Transport Layer Security (TLS), you must specify the email server CA certificate.
* Specify a client certificate only if the SMTP email server requires client certificates for authentication.

a|
*Alerts* > *Email Setup*
a|
xref:../monitor/index.adoc[Monitor & troubleshoot]
a|
|===

=== Load balancer endpoint certificate
[cols="1a,1a,1a,1a" options="header"]
|===
| Certificate type| Description| Navigation location| Details
a|
Server
a|
Authenticates the connection between S3 or Swift clients and the StorageGRID Load Balancer service on Gateway Nodes or Admin Nodes. You upload or generate a load balancer certificate when you configure a load balancer endpoint.Client applications use the load balancer certificate when connecting to StorageGRID to save and retrieve object data.

*Note:* The load balancer certificate is the most used certificate during normal StorageGRID operation.

a|
*Configuration* > *Network Settings* > *Load Balancer Endpoints*
a|

* xref:configuring-load-balancer-endpoints.adoc[Configuring load balancer endpoints]

* Creating a load balancer endpoint for FabricPool
+
xref:../fabricpool/index.adoc[Configure StorageGRID for FabricPool]
|===

=== Management interface certificate
[cols="1a,1a,1a,1a" options="header"]
|===
| Certificate type| Description| Navigation location| Details
a|
Server
a|
Authenticates the connection between client web browsers and the StorageGRID management interface, allowing users to access the Grid Manager and Tenant Manager without security warnings.

This certificate also authenticates Grid Management API and Tenant Management API connections.

You can use the default certificate created during installation or upload a custom certificate.

a|
*CONFIGURATION* > *Security* > *Certificates*, select the *Global* tab, and then select *Management interface certificate*
a|

* xref:configuring-server-certificates.adoc[Configuring server certificates]
* xref:configuring-custom-server-certificate-for-grid-manager-tenant-manager.adoc[Configuring a custom server certificate for the Grid Manager and the Tenant Manager]
|===

=== Cloud Storage Pool endpoint certificate
[cols="1a,1a,1a,1a" options="header"]
|===
| Certificate type| Description| Navigation location| Details
a|
Server
a|
Authenticates the connection from the StorageGRID Cloud Storage Pool to an external storage location (such as S3 Glacier or Microsoft Azure Blob storage). A different certificate is required for each cloud provider type.

a|
*ILM* > *Storage Pools*
a|
xref:../ilm/index.adoc[Manage objects with ILM]

|===

=== Platform services endpoint certificate
[cols="1a,1a,1a,1a" options="header"]
|===
| Certificate type| Description| Navigation location| Details
a|
Server
a|
Authenticates the connection from the StorageGRID platform service to an S3 storage resource.
a|
*Tenant Manager* > *STORAGE (S3)* > *Platform services endpoints*
a|
xref:../tenant/index.adoc[Use a tenant account]

|===

=== S3 and Swift API certificate
[cols="1a,1a,1a,1a" options="header"]
|===
| Certificate type| Description| Navigation location| Details
a|
Server
a|
Authenticates secure S3 or Swift client connections to the Local Distribution Router (LDR) service on a Storage Node or to the deprecated Connection Load Balancer (CLB) service on a Gateway Node.
a|
*CONFIGURATION* > *Security* > *Certificates*, select the *Global* tab, and then select *S3 and Swift API certificate*
a|
xref:configuring-custom-server-certificate-for-storage-node-or-clb.adoc[Configuring a custom server certificate for connections to the Storage Node or the CLB service]
|===

== Certificate examples

=== Example 1: Load Balancer service

In this example, StorageGRID acts as the server.

. You configure a load balancer endpoint and upload or generate a server certificate in StorageGRID.
. You configure an S3 or Swift client connection to the load balancer endpoint and upload the same certificate to the client.
. When the client wants to save or retrieve data, it connects to the load balancer endpoint using HTTPS.
. StorageGRID responds with the server certificate, which contains a public key, and with a signature based on the private key.
. The client verifies this certificate by comparing the server signature to the signature on its copy of the certificate. If the signatures match, the client starts a session using the same public key.
. The client sends object data to StorageGRID.

=== Example 2: External key management server (KMS)

In this example, StorageGRID acts as the client.

. Using external Key Management Server software, you configure StorageGRID as a KMS client and obtain a CA-signed server certificate, a public client certificate, and the private key for the client certificate.
. Using the Grid Manager, you configure a KMS server and upload the server and client certificates and the client private key.
. When a StorageGRID node needs an encryption key, it makes a request to the KMS server that includes data from the certificate and a signature based on the private key.
. The KMS server validates the certificate signature and decides that it can trust StorageGRID.
. The KMS server responds using the validated connection.
