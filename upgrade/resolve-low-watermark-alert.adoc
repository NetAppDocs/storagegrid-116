---
permalink: upgrade/resolve-low-watermark-alert.html
sidebar: sidebar
keywords: optimized storage volume watermarks
summary: 'If you use custom values for storage volume watermarks, you might need to resolve the *Low read-only watermark override* alert, which can be triggered after a StorageGRID 11.6 upgrade. As needed, you can update your system to start using the optimized values. '
---
= Resolve Low read-only watermark override alerts
:icons: font
:imagesdir: ../media/

[.lead]
If you use custom values for storage volume watermarks, you might need to resolve the *Low read-only watermark override* alert, which can be triggered after a StorageGRID 11.6 upgrade. As needed, you can update your system to start using the optimized values.

As described in  xref:../upgrade/whats-new.adoc[What's new in StorageGRID 11.6], optimized read-only and read-write watermarks are automatically applied to all storage volumes when you upgrade to StorageGRID 11.6, unless either of the following is true:

* More than 90% of Storage Nodes would become read-only if optimized watermarks were applied. StorageGRID will not change watermark settings if doing so would make the system unable to accept new data.

* A storage volume watermark is set to a custom value (*CONFIGURATION* > *System* > *Storage options*). StorageGRID will not override custom watermark settings with optimized values. However, StorageGRID might trigger the *Low read-only watermark override* alert if custom watermark settings are too small.

== About the Low read-only watermark override alert

If you use custom values for storage volume watermarks, the *Low read-only watermark override* alert might be triggered for one or more Storage Nodes after the StorageGRID 11.6 upgrade. This alert is triggered if StorageGRID determines that a custom setting for the *Storage Volume Soft Read-Only Watermark* is less than the minimum optimized setting it would use for any storage volume in the Storage Node. 

The *Low read-only watermark override* alert indicates that a custom watermark setting is too small &mdash; if you continue to use the custom setting, a Storage Node might run critically low on space before it can safely transition to the read-only state. Some storage volumes might become inaccessible (automatically unmounted) when the node reaches capacity. 

For example, suppose you previously set the *Storage Volume Soft Read-Only Watermark* to 5 GB, instead of using the default value of 10 GB. Now suppose that during the 11.6 upgrade, StorageGRID calculated the following optimized values for the four storage volumes in Storage Node A:

[cols="1a,1a"]
|===

|Volume 0
|12 GB

|Volume 1
|12 GB

|Volume 2
|11 GB

|Volume 3
|15 GB

|===

Because your custom watermark (5 GB) is smaller than the minimum optimized value for all volumes in the Storage Node (11 GB), the alert is triggered for Storage Node A. If you continue using the custom setting, the node might run critically low on space before it can safely transition to the read-only state.

== How to resolve the alert

Follow these steps if one or more *Low read-only watermark override* alerts are triggered when you upgrade to StorageGRID 11.6. As required, you can also perform these same steps to manually change custom watermark settings. 

.What you'll need

* You have completed the upgrade to StorageGRID 11.6.

* You are signed in to the Grid Manager using a xref:../admin/web-browser-requirements.adoc[supported web browser].

* You have the Root Access permission.

=== View current watermark settings

You can view the current storage watermark settings in the Grid Manager.

.Steps

. Select *CONFIGURATION* > *System* > *Storage options*. 
. In the Storage Watermarks section, look at the settings for the three storage volume watermark overrides.
+
image::../media/storage-volume-watermark-overrides.png[Storage volume watermark overrides]

* If the watermark overrides are *0*, all three watermarks are optimized for every storage volume on every Storage Node, based on the size of the Storage Node and the relative capacity of the volume.  
+
This is the default and recommended setting. You should not update these values. As required, you can optionally <<View optimized storage watermarks>>.

* If the watermark overrides are non-0 values, custom (non-optimized) watermarks are being used. Using custom watermark settings is not recommended. Use the instructions in the next sections to determine if you can or should adjust the settings.

=== View optimized storage watermarks

StorageGRID uses two Prometheus metrics to show the optimized values it has calculated for the *Storage Volume Soft Read-Only Watermark*. You can view the minimum and maximum optimized values for each Storage Node in your grid.

. Select *SUPPORT* > *Tools* > *Metrics*.

. In the Prometheus section, select the link to access the Prometheus user interface.

. To see the recommended minimum soft read-only watermark, enter the following Prometheus metric, and select *Execute*:
+
`storagegrid_storage_volume_minimum_optimized_soft_readonly_watermark`
+
The last column shows the minimum optimized value of the Soft Read-Only Watermark for all storage volumes on each Storage Node. If this value is greater than the custom setting for the *Storage Volume Soft Read-Only Watermark*, the *Low read-only watermark override* alert is triggered for the Storage Node.

. To see the recommended maximum soft read-only watermark, enter the following Prometheus metric, and select *Execute*: 
+
`storagegrid_storage_volume_maximum_optimized_soft_readonly_watermark`
+
The last column shows the maximum optimized value of the Soft Read-Only Watermark for all storage volumes on each Storage Node. 

. Note the highest optimized value for all Storage Nodes in your grid.

=== Determine if you can use optimized watermarks

. Select *NODES* to go to the Nodes page.

. For each online Storage Node, select *_Storage Node_* > *Storage* and scroll down to the Object Stores table.

. Compare the *Available* value for each object store (volume) to the the highest optimized watermark for all Storage Nodes in your grid.

. If at least one volume has more space available than the highest optimized value, you can use the optimized watermarks.

.. Go back to *CONFIGURATION* > *System* > *Storage options*.
.. Select *Configuration* from the Storage Options menu.
.. Change all three Watermark Overrides to 0.
.. Select *Apply Changes*.
+
Optimized storage volume watermark settings are now in effect.

. If no volume has more space available than the highest optimized value for all Storage Nodes in your grid, xref:../expand/index.adoc[expand your grid] as soon as possible. Either add storage volumes to an existing node or add new Storage Nodes.
+
NOTE: If you need to continue using custom values for the storage volume watermarks, you can xref:../monitor/silencing-alert-notifications.adoc[silence] or xref:../monitor/disabling-alert-rules.adoc[disable] the *Low read-only watermark override* alert. However, be aware that using smaller-than-recommended values for storage volume watermarks might cause some storage volumes to become inaccessible (automatically unmounted) when the node reaches capacity. 

.Related information
* xref:../admin/what-storage-volume-watermarks-are.adoc[What are storage volume watermarks?]
